<!DOCTYPE html>
<html>
<head>

<?php
  //--+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+
  // 	코딩정보
  //--+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+
  //
  //. + 개발자 : @friday1968
  //  + 이메일 : developer@7gate.kr
  //
  //. + 개발사 : (주)세븐게이트코리아
  //  + 연락처 : 010-2889-1483
  //
  //  + 화면내용 : 게시판 글등록 화면 (회원 로그인 필수)
  //--+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+


  include 'db_config.html';
  
  if ($rank != 9){echo "<script language='javascript'>top.document.location.href = 'member_login.html'</script>";}

  $the_category 	= $_GET["category"];
  $category 		= $_GET["category"];
  $the_page 		= $_GET["page"];
  $docu_no 			= $_GET['no'];
  $today   			= date("Y-M-D");
  
  if(!$the_category){
    	$query = "";
		$the_category = 0;
	}	 

  if($the_category == 0){$category_name = "커뮤니티";}
  if($the_category == 1){$category_name = "공지사항";}
  if($the_category == 3){$category_name = "Q&A";}
  if($the_category == 4){$category_name = "자유게시판";}

  $query= "SELECT * FROM site_config where site = '$site'" ;
  $result=mysql_query($query, $connect);
  $row2=mysql_fetch_array($result);
?>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <link rel="shortcut icon" href="Myicon.png" type="image/x-icon">

  <!-- include jquery -->
  <script src="http:////cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>

  <!-- include libs stylesheets -->
  <link rel="stylesheet" href="http:////maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.css" />
  <script src="http:////cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.js"></script>
  <script src="http:////maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.13.1/js/all.js"></script>
  <script src='https://kit.fontawesome.com/678c3e80a7.js' crossorigin='anonymous'></script>

  <!-- include summernote -->
  <link rel="stylesheet" href="summernote/dist/summernote-bs4.css">
  <script type="text/javascript" src="summernote/dist/summernote-bs4.js"></script>

  <link rel="stylesheet" href="summernote/examples/example.css">

  <script type="text/javascript">

    $(function() {
      $('.summernote').summernote({
        height: 600,
        lang: 'ko-KR',
        fontNames: ['나눔바른고딕', '나눔명조', 'Arial', 'Arial Black', 'Comic Sans MS', 'Courier New', ],
      	fontNamesIgnoreCheck: ['나눔바른고딕', '나눔명조'],
    	lineHeights: ['0.2', '0.3', '0.4', '0.5', '0.6', '0.8', '1.0', '1.2', '1.4', '1.5', '1.8', '2.0', '2.5', '3.0'],
  		toolbar: [
    	['style', ['bold', 'italic', 'underline', 'clear']],
    	['font', ['strikethrough', 'superscript', 'subscript', 'fontname']],
    	['fontsize', ['fontsize']],
    	['color', ['color']],
    	['para', ['ul', 'ol', 'paragraph']],
    	['height', ['height']],
    	['Insert',['picture','link','video','table','hr']],
    	['Misc',['fullscreen','codeview','undo','redo','help']],
  		],
        callbacks: {
          onImageUpload: function(files, editor, welEditable) {
            console.log('image upload:', files);
            sendFile(files[0], editor, welEditable);
          },
        }
      });

      function sendFile(file, editor, welEditable) {
        data = new FormData();
        data.append("file", file);
        $.ajax({
          url: "upload.php", // image 저장 소스
          data: data,
          cache: false,
          contentType: false,
          processData: false,
          type: 'POST',
          success: function(data) {
            var image = $('<img>').attr('src', '' + data);
            $('.summernote').summernote("insertNode", image[0]);
          },
          error: function(jqXHR, textStatus, errorThrown) {
            console.log(textStatus + " " + errorThrown);
          }
        });
      }

      $('form').on('submit', function(e) {
        e.preventDefault();
      });
    });

  </script>

  <title>
    <?php echo "$site_title | 컨텐츠 신규 등록"; ?>
  </title>

</head>

<body>

  <!-- Navigation for site -->
  <?php include 'main-nav.html'; ?>
  <!-- end of Navigation -->
	<br><br>


  <div class="container">
    <h1>BBS 글 등록</h1>

    <form id='contactForm' method='post' action='bbs_write.php' novalidate='novalidate'>

			<div class='input-group'>
  				<div class='input-group-prepend'>
					<button class='btn btn-primary' type='button' style = 'width:120px;'>제목</button>
  				</div>
                    <input class='form-control' type='text' name='title' placeholder='글제목'>
			</div>
			<br>			

			<div class='input-group'>
  				<div class='input-group-prepend'>
					<button class='btn btn-primary' type='button' style = 'width:120px;'>카테고리</button>
  				</div>
                      <select class='form-control' name='category'>
							<option value = ''>글 목록 카테고리</option>

<?
                 			 $query3= "SELECT * FROM bbs_category order by category ASC" ;
                  			 $result3=mysql_query($query3, $connect);
                  			 $row3=mysql_fetch_array($result3);


                  			while ($row3) {
                      						if ($row3[category] == 0 or $row3[category] == 10 or $row3[category] == 20 or $row3[category] == 30 or $row3[category] == 40 or
                      							$row3[category] == 50 or $row3[category] == 60 or $row3[category] == 70 or $row3[category] == 80 or $row3[category] == 90)
                      							{$row_no = "";} 
                      						else 
                      						{
                          						$row_no = "$row3[category] : ";
                     					    }

                      		echo "<option value = '$row3[category]'>$row_no $row3[category_name]</option>";

                      		$row3=mysql_fetch_array($result3);
                      }
?>
            		</select>
            </div>
			<br>			

      <textarea class="summernote" name="contents"></textarea>

      <div class='form-group'>
        <table border=0, width=100%>
          <tr>
            <td width=15% align=right>
            </td>
            <td align = 'right'>
              <br>
              <input class='btn btn-success text-uppercase' type='button' value='글 등록' onclick='submit();'>
            </td>
          </tr>
        </table>
      </div>

  </div>


<!-- footer for AUGMENT-SKI -->
<? include 'footer3.html'; ?>
<!-- end of footer -->



</body>

</html>
