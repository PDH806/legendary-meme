<!DOCTYPE html>
<html ng-app="liveApp">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	<link rel="shortcut icon" href="Myicon.png" type="image/x-icon">
    
    <title>티칭2 응시원서 작성 | 한국스키장경영협회</title>
      
		<!-- Custom styles for ski-video.tv -->
		<?
		    include 'db_config.html';
			include 'link-files.html'; 
		?>
		<!-- end of Link -->

  <style>  
  body  
  {  
   margin:0;  
   padding:0;  
  }  
  .box  
  {  
   width:800px;  
   border:1px solid #ccc;  
   background-color:#fff;  
   border-radius:5px;
   margin-top:36px;  
  }  
  </style>  
  
<script src='http://dmaps.daum.net/map_js_init/postcode.v2.js'></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
<script type="text/javascript">
function send_code(){
	var userid = document.getElementById("username").value;
	var phone3 = document.getElementById("phone1").value;
	var member_name3 = document.getElementById("member_name").value;
	var message = member_name3+"님!!!\n"+userid+"\n"+"아래 확인버튼을 클릭하시면 회원가입을 위한 검증번호를 발송해드립니다.";

	if (!userid){
	alert('회원ID를 입력해 주세요 !!!');
	return;
	}

	if (!member_name3){
	alert('이름을 입력해 주세요 !!!');
	return;
	}

	if (phone3){
	alert(message);
	}
	else
	{
	alert('전화번호를 입력해 주세요 !!!');
	return;
	}

	$.ajax({
	url  : 'sms/password_change.php',
	data : {
		phone     : phone3,
		id		  : userid,
		name	  : member_name3,
		kind	  : 1,
	},
	type : 'POST',
	dataType : function(result){
		if(result.success == false){
		 alert(result.msg);
		 return;
		}
		alert(result.data)
	} 
	});
	}
 	
function send_db(){
	var userid = document.getElementById("username").value;
	var phone3 = document.getElementById("phone1").value;
	var member_name3 = document.getElementById("member_name").value;
	var email3 = document.getElementById("email").value;
	var code3 = document.getElementById("payment").value;
	var code4 = document.getElementById("zipcode").value;
	var code7 = document.getElementById("addr1").value;
	var code8 = document.getElementById("addr3").value;
	var code5 = document.getElementById("addr2").value;
	var code6 = document.getElementById("ski_brand").value;
	var memo1 = document.getElementById("memo1").value;

	if (!userid){
	alert('회원ID를 입력해 주세요 !!!');
	return;
	}

	if (!member_name3){
	alert('이름을 입력해 주세요 !!!');
	return;
	}

	if (!phone3){
	alert('전화번호를 입력해 주세요 !!!');
	return;
	}

	if (code4 == ''){
	alert('우편번호를 입력해 주세요 !!!');
	return;
	}

	if (code5 == ''){
	alert('상세주소를 입력해 주세요 !!!');
	return;
	}

	if (code6 == 0){
	alert('스키 브랜드를 입력해 주세요 !!!');
	return;
	}

	if (!memo1){
	alert('하고싶은 말을 입력해 주세요 !!!');
	return;
	}

	if (code3 == 0){
	alert('결제방법을 입력해 주세요 !!!');
	return;
	}


	$("#loaderIcon").show();
	jQuery.ajax({
	url: "t2_test_apply_input.php",
	data : {
		member_id		: userid,
		member_email	: email3,
		payment	        : code3,
		zipcode			: code4,
		addr1			: code7,
		addr3			: code8,
		addr2			: code5,
		skibrand		: code6,
		memo1			: memo1,
	},
	type: "POST",
	success:function(data){
		top.document.location.href = 't2_schedule_list.html'
	},
		error:function (){
		top.document.location.href = 'index33.html'
		
		}
	});

}


function check_id(){
	var userid = document.getElementById("username").value;

	if (!userid){
	alert('회원ID를 입력해 주세요 !!!');
	return;
	}

	if (userid){
		url = "check_id.php?userid="+userid;
		window.open(url,"chkid","width=300,height=100");
	}
}
	
function check_code(){
	var userid = document.getElementById("username").value;
	var phone3 = document.getElementById("phone1").value;
	var member_name3 = document.getElementById("member_name").value;
	var email3 = document.getElementById("email").value;
	var code3 = document.getElementById("code").value;
	
		if (!userid){
	alert('회원ID를 입력해 주세요 !!!');
	return;
	}

	if (!member_name3){
	alert('이름을 입력해 주세요 !!!');
	return;
	}

	if (!phone3){
	alert('전화번호를 입력해 주세요 !!!');
	return;
	}

	if (!code3){
	alert('전화번호 검증번호를 입력해 주세요!!!');
	return;
	}
	
	$("#loaderIcon").show();
	jQuery.ajax({
	url: "check_code.php",
	data : {
		phone           : phone3,
		id		        : userid,
		code	        : code3,
	},
	type: "POST",
	success:function(data){
		$("#code-availability-status").html(data);
		$("#loaderIcon").hide();
	},
		error:function (){}
	});

}
	
</script>

<script type="text/javascript">

  var liveApp = angular.module("liveApp", []); 

  liveApp.controller("repeatCtrl", function ($scope)  
  {  
      $scope.student = {  
          password: "",  
          repeatPassword: ""  
      };  
  });  
  liveApp.directive("compareTo", function ()  
  {  
      return {  
          require: "ngModel",  
          scope:  
          {  
              repeatPassword: "=compareTo"  
          },  
          link: function (scope, element, attributes, paramval)  
          {  
              paramval.$validators.compareTo = function (val)  
              {  
                  return val == scope.repeatPassword;  
              };  
              scope.$watch("repeatPassword", function ()  
              {  
                  paramval.$validate();  
              });  
          }  
      };  
  });  

function check_id2() {
	
	var userid = document.getElementById("username").value;

	if (!userid){
	alert('회원ID를 입력해 주세요 !!!!');
	return;
	}
	
	$("#loaderIcon").show();
	jQuery.ajax({
	url: "check_t2_availability.php",
	data:'username='+$("#username").val(),
	type: "POST",
	success:function(data){
		$("#user-availability-status").html(data);
		$("#loaderIcon").hide();
	},
		error:function (){}
	});
}


    function Postcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                var addr = ''; // 주소 변수
                var extraAddr = ''; // 참고항목 변수

                //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                    addr = data.roadAddress;
                } else { // 사용자가 지번 주소를 선택했을 경우(J)
                    addr = data.jibunAddress;
                }

                // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                if(data.userSelectedType === 'R'){
                    // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                    // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                    if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                        extraAddr += data.bname;
                    }
                    // 건물명이 있고, 공동주택일 경우 추가한다.
                    if(data.buildingName !== '' && data.apartment === 'Y'){
                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                    if(extraAddr !== ''){
                        extraAddr = ' (' + extraAddr + ')';
                    }
                    // 조합된 참고항목을 해당 필드에 넣는다.
                    document.getElementById('addr3').value = extraAddr;
                
                } else {
                    document.getElementById('addr3').value = '';
                }

                // 우편번호와 주소 정보를 해당 필드에 넣는다.
                document.getElementById('zipcode').value = data.zonecode;
                document.getElementById('addr1').value = addr;
                // 커서를 상세주소 필드로 이동한다.
                document.getElementById('addr2').focus();
            }
        }).open();
    }

</script>

</head>

<body>

		<!-- Navigation for AUGMENT-SKI -->
			<? include 'main-nav.html'; ?>
		<!-- end of Navigation -->

		<br>

        <div id="scroll_top">
            <button type="button"><img src="/images/scr_top.jpg"></button>
        </div>
        
        
		<!-- ㅡㅡㅡㅡㅡㅡㅡㅡ/SB_HEADERㅡㅡㅡㅡㅡㅡㅡㅡ -->
            <div id="sbcenter" class="cp">
                <div class="sb_top_bg">
                    <div class="inner_wrap">
                       <h2>한국스키장경영협회 티칭2 응시원서 작성</h2>
                    </div>
            	</div>
			</div>

	<?php
	
	$query2= "SELECT * FROM `7G_Skiresort_Member` where MEMBER_ID = '$Login_User_ID'" ;
	$result2=mysql_query($query2,$connect );
	$login_member=mysql_fetch_array($result2);
	
	if ($login_member[ZIP] == '0'){$login_member[ZIP] = '';}


	echo "
<div class = 'container-fluid' style='padding-left:20px;padding-right:20px;'>
	<div class='container'>
	<br><br><br>          
	<div ng-controller='repeatCtrl'>  

		<form  name='liveForm' method=post action='t2_test_apply.html' novalidate='novalidate'>

			<label>&nbsp;❶&nbsp;회원ID</label>
			<div class='input-group'>
				<input class='form-control' type='text' id = 'username' name='member_id' value = '$login_member[MEMBER_ID]' readonly>
				  	<div class='input-group-append'>
   						 <button class='btn btn-primary' type='button' onclick='check_id2()' style = 'width:120px;'>신청여부 체크</button>
 					</div>
			</div>
			<span id='user-availability-status' style='font-weight:700;'></span>
			<br><br>

			<label>&nbsp;❷&nbsp;이름</label>
			<div class='input-group'>
				<input class='form-control' type='text' id = 'member_name' name='member_name'  value = '$login_member[MEMBER_NAME]' readonly>
			</div>
			<br><br>

			<label>&nbsp;❸&nbsp;이메일</label>
			<div class='input-group'>
				<input class='form-control' type='text' id = 'email' name='member_email' Placeholder='이메일 (옵션)'>
			</div>
			<br><br>
			
			<label>&nbsp;❹&nbsp;전화번호</label>
			<div class='input-group'>
				<input class='form-control' type='text' id='phone1' name='member_phone' value = '$login_member[PHONE]' readonly>
			</div>
			<br><br>

			
			<label>&nbsp;❺&nbsp;우편번호 & 주소</label>
			<div class='input-group'>
				<input class='form-control' type='text' id='zipcode' name='zip' value = '$login_member[ZIP]' placeholder = '우편번호 검색' readonly>
				  	<div class='input-group-append'>
   						 <button class='btn btn-primary' type='button' onclick='Postcode()' style = 'width:120px;'>우편번호검색</button>
 					</div>
			</div>
			<br>
			<div class='input-group'>
				<input class='form-control' type='text' id='addr1' name='Address1' value = '$login_member[ADDRESS1]' placeholder = '기본주소' readonly><br>
			</div>
			
			<div class='input-group'>
				<input class='form-control' type='text' id='addr3' name='Address3' value = '$login_member[ADDRESS3]' placeholder = '부속주소' readonly><br>
			</div>

			<div class='input-group'>
				<input class='form-control' type='text' id='addr2' name='Address2' value = '$login_member[ADDRESS2]' placeholder = '상세주소(아파트 동호수 등)'><br>
			</div>


			<br><br>
			

			<label>&nbsp;❻&nbsp;스키브랜드</label>
			<div class='input-group'>
				<select class='form-control' id = 'ski_brand' name='Payment'>
					<option value = '0' >스키브랜드</option>
					<option value = '0' >--------------</option>
					<option value = '1' $teaching_SELECT1>어그먼트(AUGMENT)</option>
					<option value = '2' $teaching_SELECT2>아토믹(ATOMIC)</option>
					<option value = '3' $teaching_SELECT2>살로몬(SALOMON)</option>
					<option value = '4' $teaching_SELECT2>다이나스타(DYNASTAR)</option>
					<option value = '5' $teaching_SELECT2>롤시뇰(ROSSIGNOL)</option>
					<option value = '6' $teaching_SELECT2>스퇴클리(STOCKLI)</option>
					<option value = '7' $teaching_SELECT2>뵐클(VOLKL)</option>
					<option value = '8' $teaching_SELECT2>엘란(ELAN)</option>
					<option value = '9' $teaching_SELECT2>블리자드(BLIZZARD)</option>
					<option value = '10' $teaching_SELECT2>노르디카(NORDICA)</option>
					<option value = '11' $teaching_SELECT2>해드(HEAD)</option>
					<option value = '12' $teaching_SELECT2>하트(HART)</option>
					<option value = '13' $teaching_SELECT2>피셔(FISHER)</option>

				</select>
            </div><br><br>




			<label>&nbsp;❺&nbsp;하고싶은말</label>
			<div class='input-group'>
				<textarea rows=10 id = 'memo1' name = 'Memo1' style='width:100%;' placeholder = '하고 싶은말 남겨주세요 (전광판에 표시됩니다.)'></textarea>
			</div>
			<br><br>			
			
			<label>&nbsp;❻&nbsp;결제방법</label>
			<div class='input-group'>
				<select class='form-control' id = 'payment' name='Payment'>
					<option value = '0' >결제방법(필수)</option>
					<option value = '0' >--------------</option>
					<option value = '1' $teaching_SELECT1>카드결제</option>
					<option value = '2' $teaching_SELECT2>무통장입금</option>
				</select>
            </div><br><br>
					
			";
			
			
			
?>

			<div class='form-group text-right'>
				<input class='btn btn-danger text-uppercase' type='button' value='응시원서 접수' onclick='send_db();'>
			</div>
			
		</form>
	</div>
</div>
</div>

		<br><br><br><br>

<!-- footer for AUGMENT-SKI -->
	<? include 'footer.html'; ?>
<!-- end of footer -->


</body>

</html>